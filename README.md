# Team-Play Tournament Tracker 

A Windows based tool developed for the Alaska Women's Golf Association to facilitate management of "Team-Play" golf tournaments. Two key features of the application are the generation of balanced teams (according to client-specified criteria) and the creation of unique player pairings across an arbitrary number of days of golf. These features were ultimately implemented with two common AI search-space algorithms: Random Search, and Constraint Propagation. The algorithms are described below in *Notable Algorithms*.

## Installation and Usage

**User**
To install this application, run the included `TeamPlayInstaller.msi` and follow the on-screen prompts.  
For help setting up and managing events, see `TeamPlayHowTo.pdf`.

**Developer**
Open the included solution file `AWGAEventTracker.sln` in Microsoft Visual Studio 2015 or higher.

## "Team-Play" Tournament Description

Each Team-Play tournament is a single *event* consisting of a number of *rounds* in which teams of four compete at both the individual and team level.
  
**Teams**  
Teams are auto-generated by the application from a pool of user-specified players. Each player is automatically assigned a skill-level of A, B, C, or D, based on their individual golf handicap in relation to all other players in the pool. (Players with a handicap in the top 25th percentile are given a rating of A, players in the 50th to 75th percentile are assigned a rating of B, and so on). Teams then consist of one player from each skill level.
  
Teams must be balanced to ensure a fair Team-Play experience. For example, if a team consists of only the top-ranked player (by handicap) at each level, that team has a competitive advantage over all other teams. This should not occur.

**Rounds**  
 Play occurs across the number of rounds specified by the user. During each round #TODO Ideally, no two players face each other...

**Scoring**  
Scoring for Team-Play tournaments is calculated at both the team and individual level:

Teams compete against each other team. At the end of the event, the team with the best score, aggregated across all rounds, wins.

Individual players compete against each other player at their level (A-D). At the end of the tournament the player at each level with the best score, aggregated across all rounds, wins.
  
## Notable Algorithms

**Random Search**  
A Random Search algorithm with a statistical heuristic was implemented in `TeamAssignment.cs` for the purposes of generating balanced teams. "Balanced teams" may be defined as a configuration of player-to-team assignments giving the fairest (or nearly fairest, as Random Search does not guarantee an optimal solution) distribution of player-skill (by handicap) across teams.
  
To determine balanced teams, first recall that each team must consists of four slots, one for each skill level (A-D, as previously described). Now consider the following set of players and two possible ways to distribute them amongst the three resulting teams of four -

Players (PLIST):
| Player  | Handicap  | Skill level |
| ------- |---------- |------------ |
| 1       | 2         | A           |
| 2       | 15        | A           |
| 3       | 20        | A           |
| 4       | 25        | B           |
| 5       | 39        | B           |
| 6       | 42        | B           |
| 7       | 43        | C           |
| 8       | 55        | C           |
| 9       | 65        | C           |
| 10      | 66        | D           |
| 11      | 70        | D           |
| 12      | 90        | D           |
Mean Player Handicap: 44.3

Possible Teams A (PTA):
| Team  | Players     | Mean Team Handicap |
| ----- | ----------- | ------------- |
| Red   | 1, 4, 7, 10 | 34            |
| Blu   | 2, 5, 8, 11 | 44.75         |
| Grn   | 3, 6, 9, 12 | 54.25         |

Possible Teams B (PTB):
| Team | Players     | Mean Team Handicap |
| ---- | ----------- | ------------- |
| Red  | 1, 6, 7, 12 | 39.25         |
| Blu  | 3, 4, 9, 10 | 44.           |
| Grn  | 2, 5, 8, 11 | 44.75         |

Notice that in PTA, Red team contains the top-ranked player in each skill level while, Grn team contains the lowest-ranked player in each. Clearly, Red team has a competitive advantage over Grn Team. However, if teams are arranged instead according to PTB, the teams are fair - each team has a mix of the higher and lower ranked players. This "fairness" of each team can be quantified mathematically by examining the standard deviation of each team's mean handicap from the mean of all player handicaps. The smaller the standard deviation, the fairer the teams. In this way, the standard deviation is the heuristic used to evaluate the Random Search algorithm's results.

(Note: An argument can be made that a bottom-ranked "A" player is more valuable than a top-ranked "B" player. This algorithm does not consider that metric. However it may easily be accomplished by weighting the handicaps appropriately in our calculation, possibly according to the variance among handicaps at each level.)

To implement team generation in this way, the following Random Search algorithm was used:
1. Perform the following steps 1,000 times -
    1. Randomly assigning each player to an approriate slot on a team.
    2. Compute the standard deviation of each team from the mean of all player handicaps
    3. Compute the sum of each team's standard deviation from the total mean of all player handicaps. This value is the heuristic used the the search algorithm,
2. Use the player-to-team assignment resulting in the smallest standard deviation as our official team assignment.

Note: Hill climbing algorithms are complete (will alaways give a solution) but results may not be optimal. However, when used in this context for a reasonable number of players, an optimal solution is statistically likley.

**Constraint Propagation**
#TODO


 ## Contributors
This application was designed and developed by Dustin Fast, with contributions from Brooks Woods and Tricia Riley.
